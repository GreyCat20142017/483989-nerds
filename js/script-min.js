function isLocalStorageAvailable(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function viewProduct(e,a){e.preventDefault(),alert("Заглушка. Здесь мог бы быть вызов модального окна "+a)}var mapIFrame=document.getElementById("id-map-iframe"),mapImg=document.getElementById("id-map-img"),mapLink=document.querySelector(".map-link");null!==mapLink&&null!==mapIFrame&&null!==mapImg&&(mapLink.onselectstart=function(e){e.preventDefault()},mapLink.addEventListener("dblclick",function(e){e.preventDefault(),mapIFrame.classList.toggle("map-hide"),mapIFrame.classList.toggle("map-show"),mapImg.classList.toggle("map-hide"),mapImg.classList.toggle("map-show")}));var feedbackForm=document.getElementById("id-form-feedback"),feedbackLink=document.querySelector(".map-button");function clearClasses(e){for(var a=["flex-show","effect","error"],c=0;c<a.length;c++)e.classList.contains(a[c])&&e.classList.remove(a[c])}function clearFields(e){for(var a=["id-feedback-name","id-feedback-email","id-feedback-text"],c=0;c<a.length;c++)e[a[c]].required=!1,e[a[c]].value=""}if(null!==feedbackLink&&null!==feedbackForm){var feedbackClose=feedbackForm.querySelector(".feedback-close");null!==feedbackClose&&feedbackClose.addEventListener("click",function(e){e.preventDefault(),clearClasses(feedbackForm)}),window.addEventListener("keydown",function(e){27===e.keyCode&&null!==feedbackForm&&clearClasses(feedbackForm)}),feedbackForm.addEventListener("submit",function(e){for(var a=["id-feedback-name","id-feedback-email","id-feedback-text"],c=!1,d=0;d<a.length;d++)feedbackForm[a[d]].value=feedbackForm[a[d]].value.trim(),c=!feedbackForm[a[d]].value||c;if(c){e.preventDefault(),feedbackForm.classList.remove("error"),feedbackForm.offsetWidth=feedbackForm.offsetWidth,feedbackForm.classList.add("error");for(d=0;d<a.length;d++)feedbackForm[a[d]].required=!0,feedbackForm[a[d]].value||feedbackForm[a[d]].focus()}else isLocalStorageAvailable()&&(localStorage.setItem("nerds-name",feedbackForm["id-feedback-name"].value),localStorage.setItem("nerds-email",feedbackForm["id-feedback-email"].value))}),feedbackLink.addEventListener("click",function(e){if(e.preventDefault(),clearFields(feedbackForm),feedbackForm.classList.add("effect"),feedbackForm.classList.add("flex-show"),isLocalStorageAvailable()){var a=localStorage.getItem("nerds-name"),c=localStorage.getItem("nerds-email");a&&c?(feedbackForm["id-feedback-name"].value=a,feedbackForm["id-feedback-email"].value=c,feedbackForm["id-feedback-text"].focus()):feedbackForm["id-feedback-name"].focus()}else feedbackForm["id-feedback-name"].focus()})}